{"version":3,"sources":["Header/logoIcon64.png","HttpRequest.js","MainPanel/Signin.js","MainPanel/Signup.js","MessengerPage/Chat/ChatSend/index.js","MessengerPage/Chat/Message/index.js","MessengerPage/Chat/index.js","MessengerPage/ContactList/ContactItem.js","MessengerPage/ContactList/index.js","MessengerPage/FindUsersPopup/index.js","MessengerPage/index.js","MainPanel/index.js","Header/index.js","Footer/index.js","App.js","index.js"],"names":["module","exports","rootAPI","signinAPI","signupAPI","userInfoAPI","conversations","findUsers","HttpRequestUserInfo","userid","token","fetch","method","headers","Content-Type","Authorization","HttpRequestGetMessage","from","count","Signin","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","login","password","handleChangeLogin","bind","assertThisInitialized","handleChangePassword","handleSubmit","event","setState","target","value","_this2","preventDefault","body","JSON","stringify","then","response","ok","json","data","updateToken","expires","catch","error","console","log","undefined","statusText","alert","text","errorMessage","document","getElementById","innerHTML","react_default","a","createElement","className","onSubmit","id","name","placeholder","type","onChange","onClick","React","Component","Signup","handleChangeName","status","Error","errors","Name","Login","Password","ChatSend","handleChangeTest","Message","formatDate","onClickHandle","date","d","Date","month","getMonth","day","getDate","year","getFullYear","hour","getHours","minute","getMinutes","second","getSeconds","length","join","myMessage","flex-direction","newConversation","userId","dateTimeMessage","timestamp","backgroundColor","String","substring","myDivStyle","borderColor","background","Fragment","userName","style","content","Chat","thisMyMessage","handleSubmitPostMessage","findUserName","divElement","scrollTop","scrollHeight","result","userNames","filter","item","messageUserId","thisUserId","HttpRequestPostMessage","conversionId","conversionName","messages","map","Chat_Message","key","user","messageId","Chat_ChatSend","ContactItem","ContactList","ContactList_ContactItem","participant","lastMessage","FindUsersPopup","findName","sort","b","_this3","userInFindClickHandle","closePopup","MessengerPage","currentConversionId","showPopup","connected","getConversations","getMessage","getOnlyNewMessage","getUserName","findConversionName","togglePopup","connString","socket","WebSocket","onopen","socketEmit","newSocketMessage","onmessage","_ref","message","parse","User","ConversationId","timerID","setInterval","_this4","prevState","concat","toConsumableArray","_this5","newConversationObj","_this6","_this7","MessengerPage_FindUsersPopup","MessengerPage_ContactList","MessengerPage_Chat","addNewUserName","MainPanel","loginFortSignin","tokenExpires","src_MessengerPage","MainPanel_Signin","handleClick","MainPanel_Signup","Header","handleSingOutButtonOnClick","singOut","src","logo","alt","Header_SingOutButton","SingOutButton","_React$Component2","inherits","createClass","Footer","href","App","localStorage","getItem","removeItem","userID","loadUserInfo","setItem","src_Header","src_MainPanel","src_Footer","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.884fecb4.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ7SURBVFiFxZdbbBRVGMd/38yZvfVCGyDbQqvipQ3GSiJy04QImj7YB2pQYiQmvkiMSRORELko6wKpwcZAxPiCj/RBjdpyqUqAJhgJiol4iZigqSFim1DYbpfu7uzOzPFhSynbbXdbCPyeZs755vv+cyZzzv8TrTWlEF0X9alMWYvgPQy6AaQBaAB8CP1o+kHOI153hR062dbTZpeSV4oJiK6Llis7sEGEN0Hml6QWEkAnprNz2xfb+osKSLe2voSIb/yEjek7bc99NYXV5CH+yRIoSxGTEP1UFJpOAnuz8dTuSG8kPZWAIWBW0feahF8Jc5wHpojQP1hZo3Xz0c0D+TPGTItOD1mWtfTZXa17mu6SAADqTKSno6Wj5m4JAKjLWl5XdFU0UFSALnBd2g9bDFlmzQq+fZMAjZj5YRuuBfgg5eNoRvFcIsi/nvBCIshB27odKja2r22vHRPgaAnkRyy3XB5VHgtMjxXKZbZoViiXRtO7HQJCuGoHgLzx1LtVkcpfYgGZeeLiv2FBEhWZ4FwjIN6OGVe+NSoS/uRqpV132XSfdLIOQ/6r1O2rBWApgyxlcNoKervrNxna09Neu9tFxjbnGa7nzr5bAhzHqFbVc6r5RD8OBU7FeCzOEv9Vmstzy+sinNNhjg+FCN9j8xoTtvZp4TpGlRKRdEZU+QR1WYdkFhZXDQNwgdmc4l6GtJ+4e4Vy7d5S8RyeYyAUPK9TyRQLKx1c0+IzHuEwjcSZsF3chJ2BDzsVfZeE3h8NPj9mEhsW9h1UXI7JhHjL5w2onJPhofzJUFkIRyk6qSl5Cx6MCV+dNLlvnubMbwYX+4UH6zVdJ0xWLPKYW31zJp/fG1Ag50GvzE9mKpOrBEssnWN+WHPkI5uyILSsdHFc8Pvg6Me5sXz8IXfAQLzuaVUpwvVCppkrPn4sn2DI+dOosEMnyXm4O8q1uOUyEn7PGHWvnXdawMW/K79dvCGSzPkB09lJzkDeEbIZQw9cqXwdxtny9tb3dwPbiz2stSadTFNW4bBo+RAAnufhC9g0LRmhpj4zFtt/Mci509Vj9yKCshRi6k+fbtv7IoAaUxVP7bZmBZ4BmfJwEhGCZUE8D34+fcOKO47D8S9HWNA4zJpXBqmtzxCen+bC7zVcG75hYjT6WIPv/vW0jeYb35h0tHTUZC19FqgrthKTYadt0iNJnmhO0Pz8ZX46Fea7r8fS/WU43tItR7bExl4ovzPa1bqnyUR6bkXE9c9UNUfx2JOXOXNiHlrrS4Jq3tq16Y/xsQVbs9xKeF3FPkfJguAbxzNfjhzaNME0TNobRldFA6PudSMQmmFtR9DvbO1+aw+68I5etDltX9teO2og10PhBrAA/yEc0I51YPvhjZemCiwq4Dr7n93vT/iTq9HGGtALEWrR1AKOhj5B/yMifXh8nxlOHYr0RpxS8v4PSp+mS+za9TsAAAAASUVORK5CYII=\"","\r\nconst rootAPI = \"http://messenger.westeurope.cloudapp.azure.com/api/\";\r\nconst signinAPI = 'authentication/signin';\r\nconst signupAPI = 'authentication/signup';\r\nconst userInfoAPI = 'users/';\r\nconst conversations = 'conversations';\r\nconst findUsers = 'users';\r\n/*\r\nexport function signInUser(email, password) {\r\n    return fetch(API_ROOT + SIGN_IN, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            email: email,\r\n            password: password,\r\n        }),\r\n    });\r\n*/\r\nexport function HttpRequestSignIn(login, password) {\r\n    return fetch(rootAPI + signinAPI,\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(\r\n                {\r\n                    login: login,\r\n                    password: password,\r\n                })\r\n        });\r\n}\r\n\r\n\r\nexport function HttpRequestSignUp(login, password, name) {\r\n    return fetch(rootAPI + signupAPI, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            {\r\n                login: login,\r\n                password: password,\r\n                name: name\r\n            })\r\n    });\r\n}\r\n\r\nexport function HttpRequestUserInfo(userid, token) {\r\n    return fetch(rootAPI + userInfoAPI + userid, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport function HttpRequestGetMessage(userid, token, from, count) {\r\n    /* Count берет с первые, а не последние, пока выключаем */\r\n    return fetch(rootAPI + 'conversations/' + userid + '/messages?From='+from+'&Count='+count, { /* '/messages?Count='+count */\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n    });\r\n}\r\n\r\nexport function HttpRequestPostMessage(userid, token, content) {\r\n    return fetch(rootAPI + 'conversations/' + userid + '/messages',\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + token\r\n            },\r\n            body: JSON.stringify(\r\n                {\r\n                    content: content\r\n                })\r\n        });\r\n}\r\n\r\nexport function HttpRequestGetConversations(token) {\r\n    return fetch(rootAPI + conversations, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n    });\r\n}\r\n\r\nexport function HttpRequestFIndUsers(findName, token) {\r\n    return fetch(rootAPI + findUsers + '?query='+findName, { /* '/messages?Count='+count */\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n    });\r\n}","import React from 'react';\r\nimport { HttpRequestSignIn } from '../HttpRequest'\r\n\r\nclass Signin extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { login: '', \r\n                    password: ''\r\n                    };\r\n\r\n        this.handleChangeLogin = this.handleChangeLogin.bind(this);\r\n        this.handleChangePassword = this.handleChangePassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChangeLogin(event) {\r\n        this.setState({ login: event.target.value });\r\n    }\r\n    handleChangePassword(event) {\r\n        this.setState({ password: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        HttpRequestSignIn(this.state.login, this.state.password)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    /*  var error = new Error(response.statusText);*/\r\n                    /* var error.response = response;*/\r\n                    throw response;\r\n                }\r\n            })\r\n            .then((data) => {\r\n                /*Получили токен*/\r\n                /*localStorage.setItem(\"token\", data.token);\r\n                localStorage.setItem(\"expires\", data.expires);*/\r\n                /* нужно что-то делать! */\r\n                this.props.updateToken(data.token, data.expires);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                if (error.statusText === undefined) {\r\n                    /* Явно вернулся не JSON */\r\n                    alert('Ошибка API (наверное)');\r\n                    console.log(error);\r\n                } else {\r\n                    error.text().then(errorMessage => {\r\n                        document.getElementById(\"infoText\").innerHTML = errorMessage;\r\n                    })\r\n                }\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"main\" onSubmit ={this.handleSubmit}>\r\n                    <div className=\"login-form-element\">\r\n                        <h2 id=\"login-form-h2\">\r\n                            Вход\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"login-form-element\">\r\n                        <input id=\"login\"\r\n                            name=\"login\"\r\n                            placeholder=\"Логин\"\r\n                            type=\"text\"\r\n                            className=\"inputText\"\r\n                            value={this.state.login}\r\n                            onChange={this.handleChangeLogin} />\r\n                    </div>\r\n                    <div className=\"login-form-element\">\r\n                        <input id=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"Пароль\"\r\n                            type=\"password\"\r\n                            className=\"inputText\"\r\n                            value={this.state.password}\r\n                            onChange={this.handleChangePassword} />\r\n                    </div>\r\n                    <div className=\"login-form-element\">\r\n                        <label id=\"infoText\" className=\"infoText\"></label>\r\n                    </div>\r\n                    <div className=\"login-form-element\">\r\n                        <input id=\"submitButton\" type=\"submit\" value=\"Войти\"  />\r\n                    </div>\r\n                    <div className=\"login-form-element\">\r\n                        <button type=\"button\"  className=\"link-button\" onClick={this.props.onClick}>\r\n                            Впервые? Создайте аккаунт!\r\n                            </button>\r\n                    </div>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signin;","import React from 'react';\r\nimport {HttpRequestSignUp} from '../HttpRequest'\r\n\r\nclass Signup extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { name: '', login: '', password: '' };\r\n\r\n        this.handleChangeName = this.handleChangeName.bind(this);\r\n        this.handleChangeLogin = this.handleChangeLogin.bind(this);\r\n        this.handleChangePassword = this.handleChangePassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleChangeName(event) {\r\n        this.setState({ name: event.target.value });\r\n    }\r\n    handleChangeLogin(event) {\r\n        this.setState({ login: event.target.value });\r\n    }\r\n    handleChangePassword(event) {\r\n        this.setState({ password: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        console.log(this.state.login);\r\n        HttpRequestSignUp(this.state.login, this.state.password, this.state.name)\r\n            .then(function (response) {\r\n                if (response.status >= 200 && response.status <= 400) {\r\n                    return response;\r\n                }\r\n                else {\r\n                    var error = new Error(response.statusText)\r\n                    error.response = response\r\n                    throw error\r\n                }\r\n            })\r\n            .then(function parseJSON(response) {\r\n                return response.json()\r\n            })\r\n            .then((data) => {\r\n                if (data.status === 400) {\r\n                    if (typeof (data.errors.Name) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Name\").innerHTML = data.errors.Name;\r\n                    } else { document.getElementById(\"infoText-Name\").innerHTML = ''; }\r\n                    if (typeof (data.errors.Login) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Login\").innerHTML = data.errors.Login;\r\n                    } else { document.getElementById(\"infoText-Login\").innerHTML = ''; }\r\n                    if (typeof (data.errors.Password) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Password\").innerHTML = data.errors.Password;\r\n                    } else { document.getElementById(\"infoText-Password\").innerHTML = ''; }\r\n                }\r\n                else{\r\n                this.props.updateToken(data.token, data.expires);\r\n                }\r\n\r\n            }).catch(function (error) {\r\n                /*if (error.status === 400) {\r\n                    if (typeof (data.errors.Name) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Name\").innerHTML = data.errors.Name;\r\n                    } else { document.getElementById(\"infoText-Name\").innerHTML = ''; }\r\n                    if (typeof (data.errors.Login) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Login\").innerHTML = data.errors.Login;\r\n                    } else { document.getElementById(\"infoText-Login\").innerHTML = ''; }\r\n                    if (typeof (data.errors.Password) != \"undefined\") {\r\n                        document.getElementById(\"infoText-Password\").innerHTML = data.errors.Password;\r\n                    } else { document.getElementById(\"infoText-Password\").innerHTML = ''; }\r\n                }\r\n                else{\r\n                document.getElementById(\"infoText\").innerHTML = error;\r\n                }*/\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"main\" onSubmit={this.handleSubmit} >\r\n                    <div id=\"login-form\" className=\"element\">\r\n                        <div className=\"login-form-element\">\r\n                            <h2 id=\"login-form-h2\">\r\n                                Регистрация\r\n                        </h2>\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <input id=\"name\"\r\n                                name=\"name\"\r\n                                placeholder=\"Имя\"\r\n                                type=\"text\"\r\n                                className=\"inputText\"\r\n                                value={this.state.name}\r\n                                onChange={this.handleChangeName} />\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <label id=\"infoText-Name\" className=\"infoText\"></label>\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <input id=\"login\"\r\n                                name=\"login\"\r\n                                placeholder=\"Логин\"\r\n                                type=\"text\"\r\n                                className=\"inputText\"\r\n                                value={this.state.login}\r\n                                onChange={this.handleChangeLogin} />\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <label id=\"infoText-Login\" className=\"infoText\"></label>\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <input id=\"password\"\r\n                                name=\"password\"\r\n                                placeholder=\"Пароль\"\r\n                                type=\"password\"\r\n                                className=\"inputText\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChangePassword} />\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <label id=\"infoText-Password\" className=\"infoText\"></label>\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <label id=\"infoText\" className=\"infoText\"></label>\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <input id=\"submitButton\" type=\"submit\" value=\"Создать аккаунт\" />\r\n                        </div>\r\n                        <div className=\"login-form-element\">\r\n                            <button type=\"button\"  className=\"link-button\" onClick={this.props.onClick}>\r\n                            Уже есть аккаунт? Выполните вход\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Signup;","import React from 'react';\r\n\r\nclass ChatSend extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            text: ''\r\n        }\r\n\r\n        this.handleChangeTest = this.handleChangeTest.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChangeTest(event) {\r\n        this.setState({ text: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        /*Если пусто, то ничего не делаем */\r\n        if (this.state.text){\r\n        this.props.onSubmit(this.state.text);\r\n        this.setState({ text: '' });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"sendMessagePanel\" onSubmit={this.handleSubmit}>\r\n                <input id=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Введите текст сообщение сюда\"\r\n                    className=\"inputText\"\r\n                    value={this.state.text}\r\n                    onChange={this.handleChangeTest} />\r\n                <input id=\"submitButton\" type=\"submit\" value=\"Отправить\"/>\r\n            </form>\r\n        );\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\nexport default ChatSend;","import React from 'react';\r\nimport { HttpRequestUserInfo } from '../../../HttpRequest'\r\n\r\nclass Message extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.formatDate = this.formatDate.bind(this);\r\n    this.onClickHandle = this.onClickHandle.bind(this);\r\n  }\r\n\r\n\r\n\r\n  formatDate(date) {\r\n    var d = new Date(date),\r\n      month = '' + (d.getMonth() + 1),\r\n      day = '' + d.getDate(),\r\n      year = d.getFullYear(),\r\n      hour = d.getHours(),\r\n      minute = d.getMinutes(),\r\n      second = d.getSeconds();\r\n    if (month.length < 2) month = '0' + month;\r\n    if (day.length < 2) day = '0' + day;\r\n\r\n    return [hour, minute, second].join(':') + ' ' + [year, month, day].join('-');\r\n  }\r\n\r\n  messageStyle(myMessage) {\r\n    var r =\r\n    {\r\n      'flex-direction': 'row-reverse',\r\n    };\r\n    if (myMessage) {\r\n      return r;\r\n    }\r\n    else return '';\r\n  }\r\n  onClickHandle() {\r\n    this.props.newConversation(this.props.userId);\r\n  }\r\n\r\n  render() {\r\n    const dateTimeMessage = this.formatDate(this.props.timestamp);\r\n    /* Хочу получить полу цвет из гуида пользователя */\r\n    const backgroundColor =\r\n      /* Весёлая версия =) */\r\n      String(this.props.userId).substring(0, 6);\r\n    /* Чб версия =) */\r\n    /*'9'+    String(this.props.userId).substring(0, 1)\r\n    +'9'+    String(this.props.userId).substring(2, 1)\r\n    +'9'+    String(this.props.userId).substring(4, 1)*/\r\n\r\n    const myDivStyle = {\r\n      'borderColor': '#' + backgroundColor,\r\n      'background': '#' + backgroundColor,\r\n    }\r\n    /* мои сообщение будут справа */\r\n    if (this.props.myMessage) {\r\n      return (\r\n        <>\r\n          <div className=\"messageTimestampMy\">\r\n            {this.props.userName} ({dateTimeMessage})\r\n        </div>\r\n          <div className=\"messageMy\" id={this.props.id}>\r\n            <div className=\"messageTextMy\" style={myDivStyle}>\r\n              {this.props.content}\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <>\r\n          <div className=\"messageTimestamp\">\r\n            <button type=\"button\" className=\"link-button\"\r\n              onClick={this.onClickHandle}>\r\n              {this.props.userName} ({dateTimeMessage})\r\n            </button>\r\n\r\n          </div>\r\n          <div className=\"message\" id={this.props.id}>\r\n            <div className=\"messageText\" style={myDivStyle}>\r\n              {this.props.content}\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\nexport default Message;","import React from 'react';\r\nimport ChatSend from './ChatSend'\r\nimport {  HttpRequestPostMessage } from '../../HttpRequest'\r\nimport Message from './Message'\r\n\r\nclass Chat extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.thisMyMessage = this.thisMyMessage.bind(this);\r\n    this.handleSubmitPostMessage = this.handleSubmitPostMessage.bind(this);\r\n    this.newConversation = this.newConversation.bind(this);\r\n\r\n    this.findUserName = this.findUserName.bind(this);\r\n  }\r\n  componentWillUpdate() {\r\n    let divElement = document.getElementById('messagesDiv');\r\n    divElement.scrollTop = divElement.scrollHeight;\r\n  }\r\n  findUserName(userId) {\r\n    let result = [];\r\n    if (this.props.userNames)\r\n      result = this.props.userNames.filter(item => item.id === userId);\r\n\r\n    if (result.length === 0) {\r\n      return 'поиск...';\r\n    }\r\n    else {\r\n      return result[0].name;\r\n    }\r\n  }\r\n  \r\n  newConversation(userId) {\r\n    this.props.newConversation(userId);\r\n  }\r\n\r\n  thisMyMessage(messageUserId) {\r\n    if (this.props.thisUserId === messageUserId) {\r\n      return true;\r\n    }\r\n    else { return false; }\r\n  }\r\n\r\n  /*POST*/\r\n  handleSubmitPostMessage(content) {\r\n    HttpRequestPostMessage(this.props.conversionId, this.props.token, content)\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          return response;\r\n        }\r\n        else {\r\n          alert('При получении сообщений произошла ошибка!');\r\n        }\r\n      })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n      /* раньше я сразу отображал отправленное сообщение, теперь должны завестить сокеты */\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        alert('При получении сообщений произошла ошибка!');\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"ChatPanel\">\r\n        <h1>{this.props.conversionName}</h1>\r\n        <div className=\"messages\" id=\"messagesDiv\">\r\n          {this.props.messages ?\r\n            this.props.messages.map(item => (\r\n              <Message \r\n                key={this.props.conversionId + item.id+item.timestamp}\r\n                content={item.content}\r\n                timestamp={item.timestamp}\r\n                userId={item.user}\r\n                myMessage={this.thisMyMessage(item.user)}\r\n                messageId={item.id}\r\n                token={this.props.token}\r\n                newConversation={this.newConversation}\r\n                id={this.props.conversionId + item.id+item.timestamp}\r\n\r\n                userName={this.findUserName(item.user)}\r\n              >\r\n              </Message>)) : <div>{'Полковнику никто не пишет.'}</div>}\r\n        </div>\r\n        <ChatSend onSubmit={this.handleSubmitPostMessage} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\nexport default Chat;","import React from 'react';\r\n\r\nclass ContactItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.formatDate = this.formatDate.bind(this);\r\n        this.onClickHandle = this.onClickHandle.bind(this);\r\n    }\r\n\r\n\r\n    formatDate(date) {\r\n        if (!date) return '';\r\n        var d = new Date(date),\r\n            month = '' + (d.getMonth() + 1),\r\n            day = '' + d.getDate(),\r\n            year = d.getFullYear(),\r\n            hour = d.getHours(),\r\n            minute = d.getMinutes(),\r\n            second = d.getSeconds();\r\n        if (month.length < 2) month = '0' + month;\r\n        if (day.length < 2) day = '0' + day;\r\n\r\n        return [hour, minute, second].join(':') + ' ' + [year, month, day].join('-');\r\n    }\r\n\r\n    onClickHandle() {\r\n        this.props.newConversation(this.props.userId)\r\n    }\r\n\r\n    render() {\r\n        if (this.props.userId) {\r\n            return (\r\n                <div>\r\n                    <div className=\"contactItem\" >\r\n                        <button type=\"button\" className=\"link-button-contact\" onClick={this.onClickHandle}>\r\n                            <div className=\"contactItem-Name\">{this.props.userName}</div>\r\n                        </button> <div className=\"contactItem-LastContent\">{this.props.content.substring(0, 20)}{this.props.content.length > 20 ? '...' : ''}</div>\r\n                        <div className=\"contactItem-timestamp\">{this.formatDate(this.props.timestamp)}</div>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n\r\n                    <div className=\"contactItem-public\" /*style={myDivStyle}*/>\r\n                        <button type=\"button\" className=\"link-button-contact\" onClick={this.onClickHandle}>\r\n                            <div className=\"contactItem-Name\">Публичный чат</div>\r\n                        </button >\r\n                        <div className=\"contactItem-LastContent\">{this.props.content.substring(0, 20)}{this.props.content.length > 20 ? '...' : ''}</div>\r\n                        <div className=\"contactItem-timestamp\">{this.formatDate(this.props.timestamp)}</div>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default ContactItem;","import React from 'react';\r\nimport ContactItem from './ContactItem'\r\n\r\nclass ContactList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.newConversation = this.newConversation.bind(this);\r\n\r\n        this.findUserName = this.findUserName.bind(this);\r\n    }\r\n\r\n    findUserName(userId) {\r\n        let result = [];\r\n        if (this.props.userNames)\r\n          result = this.props.userNames.filter(item => item.id === userId);\r\n    \r\n        if (result.length === 0) {\r\n          return 'поиск...';\r\n        }\r\n        else {\r\n          return result[0].name;\r\n        }\r\n      }\r\n      \r\n\r\n    newConversation(userId) {\r\n        this.props.newConversation(userId)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id = \"contactListItems\">\r\n                {this.props.conversations.map(item => (\r\n                      <ContactItem key={item.id}\r\n                        token = {this.props.token}\r\n                        userId={item.participant}                    \r\n                        content={item.lastMessage.content}\r\n                        timestamp={item.lastMessage.timestamp}\r\n                        newConversation = {this.newConversation}\r\n\r\n                        userName={this.findUserName(item.participant)}\r\n                      >\r\n                      </ContactItem>)) }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ContactList;","import React from 'react';\r\nimport { HttpRequestFIndUsers } from '../../HttpRequest'\r\n\r\nclass FindUsersPopup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: '',\r\n      findUsers: []\r\n    }\r\n\r\n    this.handleChangeTest = this.handleChangeTest.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.findUsers = this.findUsers.bind(this);\r\n\r\n  }\r\n\r\n  handleChangeTest(event) {\r\n    this.setState({ text: event.target.value });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    /*this.props.onSubmit(this.state.text);*/\r\n    if (this.state.text.length > 0) {\r\n      this.findUsers();\r\n    }\r\n    else {\r\n      let notFoundUser = [\r\n        {\r\n          id: null,\r\n          name: 'Пожалуйста, введите текст'\r\n        }]\r\n      this.setState({ findUsers: notFoundUser })\r\n    }\r\n  }\r\n\r\n  findUsers() {\r\n    HttpRequestFIndUsers(this.state.text, this.props.token)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n        else {\r\n          throw response;\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data.length > 0) {\r\n\r\n          /* Сортировка по имени, как при поиске комверсий */\r\n          data.sort((a, b) => (a.name > b.name) ? 1 : ((b.name > a.name) ? -1 : 0));\r\n          this.setState({ findUsers: data })\r\n        } else {\r\n          let notFoundUser = [\r\n            {\r\n              id: null,\r\n              name: 'Пользователи не найдены'\r\n            }]\r\n          this.setState({ findUsers: notFoundUser })\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (error.status === 404) {\r\n          let notFoundUser = [\r\n            {\r\n              id: null,\r\n              name: 'Пользователи не найдены'\r\n            }]\r\n          this.setState({ findUsers: notFoundUser })\r\n        }\r\n        else {\r\n          console.log(error);\r\n          alert('При получении данных о контактах произошла ошибка!');\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    console.log(this.state.findUsers);\r\n    return (\r\n      <div className='popup'>\r\n        <div className='popup_inner'>\r\n          <h1>Поиск</h1>\r\n          <form className=\"popupFindButtonForm\" onSubmit={this.handleSubmit}>\r\n            <input id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Имя или логин\"\r\n              className=\"inputText\"\r\n              value={this.state.text}\r\n              onChange={this.handleChangeTest} />\r\n            <input id=\"submitButton\" type=\"submit\" value=\"Найти\" />\r\n          </form>\r\n          <hr></hr>\r\n          <ul className=\"listFindResult\"> \r\n            { /* item.id, item.name */\r\n              this.state.findUsers.map(item => (\r\n                item.id ?\r\n                  <li className=\"link-button\"\r\n                    key={item.id}\r\n                    name={item.name}\r\n                    onClick={() => this.props.userInFindClickHandle(item.id, item.name)}>\r\n                    {item.name} ({item.id})\r\n              </li> :\r\n                  <li key={item.id}>\r\n                    {item.name}\r\n                  </li>\r\n              )\r\n              )\r\n            }\r\n          </ul>\r\n          <button className='popupCloseButton' onClick={this.props.closePopup}>Закрыть</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FindUsersPopup;","import React from 'react';\r\nimport Chat from './Chat/index'\r\nimport ContactList from './ContactList'\r\nimport { HttpRequestGetMessage, HttpRequestGetConversations, HttpRequestUserInfo } from '../HttpRequest'\r\nimport FindUsersPopup from './FindUsersPopup'\r\nclass MessengerPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state =\r\n            {\r\n                currentConversionId: 'public',\r\n                conversations: [],\r\n                userNames: [], \r\n                messages: [],\r\n                //наверное три массива выше нужно объединить в один объект. Нужно это сделать и мапить их друг на друга.\r\n                showPopup: false,\r\n                connected: false\r\n            }\r\n\r\n        this.newConversation = this.newConversation.bind(this);\r\n        this.getConversations = this.getConversations.bind(this);\r\n        this.getMessage = this.getMessage.bind(this);\r\n        this.getOnlyNewMessage = this.getOnlyNewMessage.bind(this);\r\n        this.getUserName = this.getUserName.bind(this);\r\n\r\n        this.findConversionName = this.findConversionName.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this)\r\n\r\n        this.userInFindClickHandle = this.userInFindClickHandle.bind(this);\r\n        let connString = \"ws://messenger.westeurope.cloudapp.azure.com/socket/messages?token=\" + this.props.token;\r\n\r\n        this.socket = new WebSocket(connString);\r\n\r\n        this.socket.onopen = () => {\r\n            console.log('socket connected');\r\n            this.setState({ connected: true });\r\n        };\r\n        this.socketEmit = this.socketEmit.bind(this);\r\n        this.newSocketMessage = this.newSocketMessage.bind(this);\r\n    }\r\n\r\n    socketEmit() {\r\n        if (this.state.connected) {\r\n            console.log('сокет жив');\r\n            this.socket.onmessage =\r\n                ({ data }) => this.newSocketMessage(data);\r\n        }\r\n    }\r\n\r\n    newSocketMessage(data) {\r\n        let message = JSON.parse(data);\r\n        console.log('newSocketMessage');\r\n        console.log(message);\r\n        console.log(this.props.thisUserId);\r\n        console.log(message.User);\r\n        console.log(this.state.currentConversionId);\r\n        console.log(this.state.messages.length);\r\n        if (message.User === this.props.thisUserId) {\r\n            this.getOnlyNewMessage(this.state.currentConversionId, this.props.token, this.state.messages.length, 1);\r\n            console.log('прило т.к. своё');\r\n            return;\r\n        }\r\n        if (message.ConversationId === 'public') {\r\n            if (this.state.currentConversionId === 'public') {\r\n                this.getOnlyNewMessage(this.state.currentConversionId, this.props.token, this.state.messages.length, 1);\r\n            }\r\n        }\r\n        else {\r\n            if (message.User === this.state.currentConversionId) {\r\n                this.getOnlyNewMessage(this.state.currentConversionId, this.props.token, this.state.messages.length, 1);\r\n                console.log('прило т.к. ты в нужно чате');\r\n            } else {\r\n                console.log('прило но ты не в том чате');\r\n                /* вновь получаем чаты */\r\n                this.getConversations();\r\n                /* Оповестить бы пользователя еще... */\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.getConversations();\r\n        this.getMessage(this.state.currentConversionId, this.props.token);\r\n        /* Все работало, а теперь пришли соккеты */\r\n        this.timerID = setInterval(() => this.socketEmit(), 500);\r\n    }\r\n    /* найти имя пользователя */\r\n    getUserName(userId) {\r\n        HttpRequestUserInfo(userId, this.props.token)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then((data) => {\r\n                /*this.setState({userName: data.name})*/\r\n                this.setState(prevState => ({\r\n                    userNames: [...prevState.userNames, data]\r\n                }))\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                if (error.statusText === undefined) {\r\n                    /* Явно вернулся не JSON */\r\n                    console.log(error);\r\n                    alert('При получении данных о пользователе произошла ошибка!');\r\n                } else {\r\n                    console.log(error);\r\n                    alert('При получении данных о пользователе произошла ошибка!');\r\n                }\r\n            });\r\n    }\r\n    /* получить все чаты */\r\n    getConversations() {\r\n        HttpRequestGetConversations(this.props.token)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then((data) => {\r\n                /* Желательно, чтобы публичный чат был сверху, а дальше по афавиту */\r\n                /* Меняю NULL на '' т.к. она маленькая самая строка, как и этот костыль =) */\r\n                data.sort((a, b) => (\r\n                    (a.participant ? a.participant : '')\r\n                    > b.participant) ? 1 :\r\n                    ((b.participant > (a.participant ? a.participant : '')) ? -1 : 0));\r\n                this.setState({ conversations: data });\r\n                console.log(data);\r\n                data.map(item => (\r\n                    this.getUserName(item.participant ? item.participant : 'me')\r\n                ))\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                if (error.statusText === undefined) {\r\n                    /* Явно вернулся не JSON */\r\n                    console.log(error);\r\n                    alert('При получении данных о контактах произошла ошбка!');\r\n                } else {\r\n                    console.log(error);\r\n                    alert('При получении данных о контактах произошла ошибка!');\r\n                }\r\n            });\r\n    }\r\n\r\n    /* сменили чат или начали новый через поиск, или из чата */\r\n    newConversation(userId) {\r\n        /* Нужно проверить, что у нас нет уже чата с данным пользователем*/\r\n        if (userId) {\r\n            let result = [];\r\n            if (this.state.conversations) {\r\n                result = this.state.conversations.filter(\r\n                    item => item.participant === userId);\r\n            }\r\n            if (result.length === 0) {\r\n                let newConversationObj =\r\n                {\r\n                    'participant': userId,\r\n                    'id': userId,\r\n                    'lastMessage':\r\n                    {\r\n                        'timestamp': '',\r\n                        'content': 'нет сообщений',\r\n                    }\r\n                }\r\n                //Нужно найти (вдруг новенький через поиск)\r\n                this.getUserName(userId ? userId: 'me');\r\n                this.setState(prevState => ({\r\n                    conversations: [...prevState.conversations, newConversationObj]\r\n                }))\r\n            }\r\n            this.setState({\r\n                currentConversionId: userId ? userId : 'public'\r\n            })\r\n        }\r\n        else {\r\n            console.log('меняет текущий чат');\r\n            this.setState({\r\n                currentConversionId: userId ? userId : 'public'\r\n            });\r\n        }\r\n        /*сообщения новой конверсии */\r\n        this.getMessage(userId ? userId : 'public', this.props.token);\r\n    }\r\n\r\n\r\n    /*GET MESSAGE*/\r\n    getMessage(conversionId, token, from, count) {\r\n        HttpRequestGetMessage(conversionId, token, from, count)\r\n            .then((response) => {\r\n                if (response.status === 200) {\r\n                    return response;\r\n                }\r\n                else {\r\n                    alert('При получении сообщений произошла ошибка!');\r\n                }\r\n            })\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                console.log('пришли сообщения');\r\n                console.log(data);\r\n                this.setState({ messages: data });\r\n                /////////////////////////////////////////////\r\n                data.map(item => (\r\n                    this.getUserName(item.user)\r\n                )\r\n                );\r\n\r\n            }).catch(function (error) {\r\n                console.log(error);\r\n                alert('При получении сообщений произошла ошибка!');\r\n            })\r\n    }\r\n\r\n    getOnlyNewMessage(conversionId, token, from, count) {\r\n        HttpRequestGetMessage(conversionId, token, from, count)\r\n            .then((response) => {\r\n                if (response.status === 200) {\r\n                    return response;\r\n                }\r\n                else {\r\n                    alert('При получении сообщений произошла ошибка!');\r\n                }\r\n            })\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                console.log('пришли новые сообщения');\r\n                //что бы data не запихался массивом в объект нужно ставить три точки, так оказывается комбаинется (джойнится)\r\n                this.setState(prevState => ({\r\n                    messages: [...prevState.messages, ...data]\r\n                }))\r\n                console.log(this.state.messages);\r\n                /////////////////////////////////////////////\r\n                data.map(item => (\r\n                    this.getUserName(item.user)\r\n                )\r\n                );\r\n                \r\n\r\n            }).catch(function (error) {\r\n                console.log(error);\r\n                alert('При получении сообщений произошла ошибка!');\r\n            })\r\n    }\r\n\r\n\r\n\r\n    /* окошко для поиска пользователей */\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    userInFindClickHandle(userId, userName) {\r\n        /* Сообщение самому себе ведет к ошибки 500 от сервера при получении конверсий */\r\n        if (this.props.thisUserId !== userId)\r\n            this.newConversation(userId, userName);\r\n        else alert('Час с сами собой ведь не имеет смысла. Попробуйте использовать приложение \"заметки\" в Вашем смартфоне.');\r\n\r\n        this.togglePopup();\r\n    }\r\n\r\n    findConversionName(userId) {\r\n        if (!userId || userId === 'public') return 'Публичный чат'\r\n\r\n        let result = [];\r\n        if (this.state.userNames)\r\n            result = this.state.userNames.filter(item => item.id === userId);\r\n\r\n        if (result.length === 0) {\r\n            return 'поиск...';\r\n        }\r\n        else {\r\n            return result[0].name;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"MessengerPage\">\r\n                <div className=\"contactList\">\r\n                    <h1>Чаты</h1>\r\n                    <div className=\"buttonFindUserPopup\"\r\n                        onClick={this.togglePopup.bind(this)}\r\n                    >\r\n                        Поиск</div>\r\n                    {this.state.showPopup ?\r\n                        <FindUsersPopup\r\n                            closePopup={this.togglePopup.bind(this)} /* попробую прицепить сразу */\r\n                            token={this.props.token}\r\n\r\n                            userInFindClickHandle={this.userInFindClickHandle}\r\n                        />\r\n                        : null\r\n                    }\r\n\r\n                    <ContactList\r\n                        token={this.props.token}\r\n                        conversations={this.state.conversations}\r\n                        newConversation={this.newConversation}\r\n                        userNames={this.state.userNames}\r\n                    />\r\n                </div>\r\n                <div className=\"chatControl\">\r\n                    <Chat token={this.props.token}\r\n                        thisUserId={this.props.thisUserId}\r\n                        conversionId={this.state.currentConversionId}\r\n                        conversionName={this.findConversionName(this.state.currentConversionId)}\r\n                        newConversation={this.newConversation}\r\n                        addNewUserName={this.addNewUserName}\r\n                        userNames={this.state.userNames}\r\n                        messages={this.state.messages}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MessengerPage;","import React from 'react';\r\nimport Signin from './Signin'\r\nimport Signup from './Signup'\r\nimport MessengerPage from '../MessengerPage/index'\r\n\r\nclass MainPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loginFortSignin: true,\r\n        }\r\n        this.updateToken = this.updateToken.bind(this);\r\n    }\r\n\r\n    updateToken(token, tokenExpires) {\r\n        this.props.updateToken(token, tokenExpires);\r\n    }\r\n\r\n    handleClick() {\r\n        this.setState({ loginFortSignin: !this.state.loginFortSignin })\r\n    }\r\n\r\n    render() {\r\n        if (this.props.token) {\r\n            return (<MessengerPage token={this.props.token} thisUserId={this.props.thisUserId} />)\r\n\r\n        }\r\n        else {\r\n            if (this.state.loginFortSignin) {\r\n\r\n                return (\r\n                    <div className=\"login-logup\">\r\n                        <Signin onClick={() => this.handleClick()} updateToken={this.updateToken} />\r\n                    </div>\r\n                );\r\n            }\r\n            else {\r\n                return (\r\n                    <div className=\"login-logup\">\r\n                        <Signup onClick={() => this.handleClick()} updateToken={this.updateToken} />\r\n                    </div>);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default MainPanel;","import logo from './logoIcon64.png'; /* нагуглинная картинка */\r\nimport React from 'react';\r\n\r\nclass Header extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleSingOutButtonOnClick = this.handleSingOutButtonOnClick.bind(this)\r\n    }\r\n    handleSingOutButtonOnClick() {\r\n        this.props.singOut();\r\n    }\r\n    render() {\r\n        return (\r\n            <header id=\"header\">\r\n                <h1>\r\n                    <img src={logo} alt='Логотип' />\r\n                    Чат 2019\r\n                    </h1>\r\n                <SingOutButton userName={this.props.userName} handleSingOutButtonOnClick={this.handleSingOutButtonOnClick} />\r\n            </header>);\r\n\r\n    }\r\n}\r\n\r\nexport default Header;\r\n\r\nexport class SingOutButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleSingOutButtonOnClick = this.handleSingOutButtonOnClick.bind(this);\r\n    }\r\n    handleSingOutButtonOnClick() {\r\n        this.props.handleSingOutButtonOnClick();\r\n    }\r\n    render() {\r\n        if (this.props.userName === '') {\r\n            return (<div />);\r\n        }\r\n        else {\r\n            return (\r\n                <div id=\"ProfileInfo\">\r\n                    <div id=\"ProfileInfo-UserName\" className=\"ProfileInfoLabel\">\r\n                        {this.props.userName}\r\n                    </div>\r\n                    <div id=\"ProfileInfo-id\" className=\"ProfileInfoLabel\">\r\n                        <button type=\"button\" className=\"link-button-signout\" onClick={this.handleSingOutButtonOnClick}>\r\n                            Выход\r\n                    </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nclass Footer extends React.Component {\r\n    render() {\r\n        return (<footer id=\"footer\">\r\n            <div id=\"footer-text\">\r\n                © 2019 Ilya Dyakovetskiy\r\n                </div>\r\n            <div id=\"footer-mailto\">\r\n                <a href=\"mailto:Ilya.Dyakovetskiy@abbyy.com\">Ilya.Dyakovetskiy@abbyy.com</a>\r\n            </div>\r\n        </footer>);\r\n    }\r\n}\r\nexport default Footer;\r\n\r\n","import React from 'react';\r\nimport MainPanel from './MainPanel'\r\nimport Header from './Header/index';\r\nimport Footer from './Footer/index';\r\nimport { HttpRequestUserInfo } from './HttpRequest'\r\n\r\nclass App extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            login: '',\r\n            token: localStorage.getItem(\"token\"),\r\n            tokenExpires: localStorage.getItem(\"expires\"),\r\n            userName: '',\r\n            userId: ''\r\n        }\r\n\r\n        this.updateToken = this.updateToken.bind(this);\r\n        this.singOut = this.singOut.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() \r\n    {\r\n        /* если токен кончился, отправляем на логин */\r\n        let tokenExpiresdate = new Date(this.state.tokenExpires);\r\n        if (tokenExpiresdate < new Date()) {\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"expires\");\r\n            this.setState({ token: null, tokenExpires: null, userID: '', userName: '' })\r\n        \r\n        }\r\n        if(this.state.token)\r\n            this.loadUserInfo(this.state.token, 'me');\r\n    }\r\n\r\n    updateToken(token, tokenExpires){\r\n\r\n        localStorage.setItem(\"token\", token);\r\n        localStorage.setItem(\"expires\", tokenExpires);\r\n        this.loadUserInfo(token, 'me');\r\n\r\n        this.setState({\r\n            token: token\r\n            , tokenExpires: tokenExpires\r\n        });\r\n    }\r\n\r\n    loadUserInfo(token, id) {\r\n        HttpRequestUserInfo(id, token)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then((data) => {\r\n                console.log('my id: '+ data.id)\r\n                this.setState({\r\n                    userName: data.name\r\n                    , userId: data.id\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                if (error.statusText === undefined) {\r\n                    console.log(error);\r\n                    alert('При получении данных о пользователе произошла ошибка!');\r\n                } else {\r\n                    console.log(error);\r\n                    alert('При получении данных о пользователе произошла ошибка!');\r\n                }\r\n\r\n            });\r\n    }\r\n\r\n    singOut() {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"expires\");\r\n        this.setState({ token: null, tokenExpires: null, userID: '', userName: '' })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (<>\r\n            <Header token={this.state.token}\r\n                userName={this.state.userName}\r\n                singOut={this.singOut}\r\n            />\r\n            <MainPanel updateToken={this.updateToken} \r\n            token={this.state.token} \r\n            thisUserId = {this.state.userId}/>\r\n            <Footer />\r\n        </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('main-div')\n);\n\n\n"],"sourceRoot":""}